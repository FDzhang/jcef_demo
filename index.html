<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JCEF JavaScript-Javaäº¤äº’</title>
</head>
<body>
    <h1>JavaScriptè°ƒç”¨Javaæ–¹æ³•ç¤ºä¾‹</h1>
    
    <button onclick="getCurrentTime()">è·å–Javaå½“å‰æ—¶é—´</button>
    <button onclick="javaAdd()">JavaåŠ æ³•è®¡ç®—</button>
    <button onclick="showJavaMessage()">æ˜¾ç¤ºJavaæ¶ˆæ¯æ¡†</button>
    
    <div id="result" style="margin-top:20px;padding:10px;border:1px solid #ccc;">ç­‰å¾…è°ƒç”¨...</div>

    <script>
        // JavaScriptè°ƒç”¨Javaæ–¹æ³•çš„æ ¸å¿ƒå‡½æ•°
        function callJavaMethod(request, callback) {
            if (typeof window.cefQuery !== 'undefined') {
                window.cefQuery({
                    request: request,
                    persistent: false,
                    onSuccess: function(response) {
                        callback(true, response);
                    },
                    onFailure: function(errorCode, errorMessage) {
                        callback(false, "é”™è¯¯(" + errorCode + "): " + errorMessage);
                    }
                });
            } else {
                callback(false, "cefQueryæœªæ‰¾åˆ°ï¼Œè¯·åœ¨JCEFç¯å¢ƒä¸­è¿è¡Œ");
            }
        }

        // è·å–Javaå½“å‰æ—¶é—´
        function getCurrentTime() {
            callJavaMethod('currentTime', function(success, response) {
                document.getElementById('result').innerHTML = 
                    success ? 'âœ… Javaæ—¶é—´: ' + response : 'âŒ ' + response;
            });
        }

        // JavaåŠ æ³•è®¡ç®— (10 + 20)
        function javaAdd() {
            callJavaMethod('add:10,20', function(success, response) {
                document.getElementById('result').innerHTML = 
                    success ? 'âœ… 10 + 20 = ' + response : 'âŒ ' + response;
            });
        }

        // æ˜¾ç¤ºJavaæ¶ˆæ¯æ¡†
        function showJavaMessage() {
            callJavaMethod('showMessage:Hello from JavaScript!', function(success, response) {
                document.getElementById('result').innerHTML = 
                    success ? 'âœ… ' + response : 'âŒ ' + response;
            });
        }

        // ========== Javaå¯ä»¥è°ƒç”¨çš„JavaScriptæ–¹æ³• ==========
        
        // Javaè°ƒç”¨çš„æ–¹æ³•ï¼šæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        function showWelcome() {
            document.getElementById('result').innerHTML = 'ğŸ‰ æ¬¢è¿ä½¿ç”¨JCEFåŒå‘äº¤äº’ï¼';
        }
        
        // Javaè°ƒç”¨çš„æ–¹æ³•ï¼šå¤æ‚è®¡ç®—
        function complexCalculation(a, b) {
            var result = Math.pow(a, 2) + Math.pow(b, 2);
            return Math.sqrt(result);
        }
        
        // Javaè°ƒç”¨çš„æ–¹æ³•ï¼šåˆ›å»ºåŠ¨æ€å†…å®¹
        function createDynamicContent() {
            var content = '<div style="background:#f0f8ff;padding:10px;margin:10px;border-radius:5px;">';
            content += '<h3>JavaåŠ¨æ€åˆ›å»ºçš„å†…å®¹</h3>';
            content += '<p>åˆ›å»ºæ—¶é—´: ' + new Date().toLocaleString() + '</p>';
            content += '<p>éšæœºæ•°: ' + Math.floor(Math.random() * 1000) + '</p>';
            content += '</div>';
            document.body.innerHTML += content;
        }
        
        // Javaè°ƒç”¨çš„æ–¹æ³•ï¼šæ¸…ç©ºç»“æœ
        function clearResult() {
            document.getElementById('result').innerHTML = 'ç»“æœå·²æ¸…ç©º';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.onload = function() {
            console.log('HTMLé¡µé¢åŠ è½½å®Œæˆï¼ŒJavaå¯ä»¥é€šè¿‡browser.executeJavaScript()è°ƒç”¨JavaScriptæ–¹æ³•');
            // æ˜¾ç¤ºåŠ è½½å®Œæˆæ¶ˆæ¯
            document.getElementById('result').innerHTML = 'âœ… é¡µé¢åŠ è½½å®Œæˆï¼ŒåŒå‘äº¤äº’å·²å°±ç»ª';
        };
    </script>
</body>
</html>